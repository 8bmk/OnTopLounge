<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OTL | Configurateur Premium</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Space+Mono&display=swap" rel="stylesheet">
    <style>
        :root { 
            --primary: #a166ff; 
            --bg: #08080a; 
            --card-bg: rgba(15, 15, 20, 0.9); 
            --accent: #d4b8ff;
        }
        
        *{margin:0;padding:0;box-sizing:border-box;}
        body{font-family:'Inter',sans-serif;background:var(--bg);color:white;overflow-x:hidden;perspective: 1000px;}

        #bg-video { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2; object-fit: cover; opacity: 0.2; }

        .back-link { position: absolute; top: 30px; left: 30px; color: var(--primary); text-decoration: none; font-family: 'Space Mono'; font-size: 0.8rem; border: 1px solid var(--primary); padding: 8px 15px; border-radius: 5px; transition: 0.3s; z-index: 100; }

        .parallax-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 100px 20px;
            transform-style: preserve-3d;
        }

        .config-card { 
            background: var(--card-bg); 
            border: 1px solid rgba(161, 102, 255, 0.3); 
            border-radius: 30px; 
            padding: 50px; 
            max-width: 900px;
            width: 100%;
            backdrop-filter: blur(30px); 
            box-shadow: 0 40px 100px rgba(0,0,0,0.8);
            transform-style: preserve-3d;
            transition: transform 0.1s ease-out;
        }

        .step-section { margin-bottom: 40px; transform: translateZ(20px); }
        .label-group { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 15px; }
        .step-label { font-family: 'Space Mono'; color: var(--primary); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 2px; }
        .val-num { font-family: 'Space Mono'; font-size: 1.6rem; font-weight: 900; color: white; }

        /* Sliders */
        input[type=range] { width: 100%; -webkit-appearance: none; background: transparent; height: 30px; }
        input[type=range]::-webkit-slider-runnable-track { height: 4px; background: rgba(161, 102, 255, 0.2); border-radius: 2px; }
        input[type=range]::-webkit-slider-thumb { height: 22px; width: 22px; border-radius: 50%; background: var(--primary); -webkit-appearance: none; margin-top: -9px; cursor: pointer; box-shadow: 0 0 15px var(--primary); }

        /* Grid Options */
        .options-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 10px; }
        .opt-item { 
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); 
            padding: 20px; border-radius: 15px; cursor: pointer; transition: 0.3s;
            display: flex; flex-direction: column; gap: 5px; transform: translateZ(10px);
        }
        .opt-item:hover { border-color: var(--primary); background: rgba(161, 102, 255, 0.05); }
        .opt-item.active { background: var(--primary); border-color: white; }
        .opt-item.active * { color: white !important; }
        .opt-name { font-size: 0.85rem; font-weight: 700; }
        .opt-price { color: var(--primary); font-family: 'Space Mono'; font-size: 0.8rem; }

        /* Footer Card */
        .card-footer { 
            margin-top: 50px; padding-top: 30px; 
            border-top: 1px solid rgba(255,255,255,0.1);
            display: grid; grid-template-columns: 1fr 1fr; gap: 20px;
            transform: translateZ(30px);
        }

        .price-box { font-family: 'Space Mono'; }
        .total-price { font-size: 3.5rem; font-weight: 900; line-height: 1; margin: 10px 0; color: var(--primary); }
        .delivery-info { font-size: 0.8rem; opacity: 0.6; display: flex; align-items: center; gap: 8px; }

        .btn-checkout {
            background: white; color: black; text-decoration: none;
            display: flex; align-items: center; justify-content: center;
            border-radius: 15px; font-weight: 900; font-family: 'Space Mono';
            text-transform: uppercase; transition: 0.3s;
        }
        .btn-checkout:hover { background: var(--primary); color: white; transform: scale(1.02); }

    </style>
</head>
<body>

<video autoplay muted loop playsinline id="bg-video">
    <source src="purple-sky.3840x2160.mp4" type="video/mp4">
</video>

<div class="parallax-container" id="scene">
    <div class="config-card" id="card">
        <a href="index.html" class="back-link">← ANNULER</a>
        
        <div style="text-align: center; margin-bottom: 50px;">
            <h1 style="font-family: 'Space Mono'; font-size: 1.2rem; letter-spacing: 8px; opacity: 0.5;">BUILDER V2.4</h1>
        </div>

        <div class="step-section">
            <div class="label-group">
                <span class="step-label">01 // CAPITAL GTA$</span>
                <span class="val-num" id="cash-val">100M</span>
            </div>
            <input type="range" id="cash-slider" min="0" max="500" step="10" value="100">
        </div>

        <div class="step-section">
            <div class="label-group">
                <span class="step-label">02 // TENUES MODDÉES</span>
                <span class="val-num" id="outfit-val">0</span>
            </div>
            <input type="range" id="outfit-slider" min="0" max="20" step="1" value="0">
        </div>

        <div class="step-section">
            <span class="step-label">03 // VÉHICULES & MODULES</span>
            <div class="options-grid">
                <div class="opt-item" onclick="toggleOption(this, 10, 'Pack 3 Véhicules')">
                    <span class="opt-name">PACK 3 VÉHICULES</span>
                    <span class="opt-price">+10.00€</span>
                </div>
                <div class="opt-item" onclick="toggleOption(this, 25, 'GARAGE COMPLET')">
                    <span class="opt-name">GARAGE FULL (10)</span>
                    <span class="opt-price">+25.00€</span>
                </div>
                <div class="opt-item" onclick="toggleOption(this, 10, 'Unlock All')">
                    <span class="opt-name">UNLOCK ALL ALL</span>
                    <span class="opt-price">+10.00€</span>
                </div>
                <div class="opt-item" onclick="toggleOption(this, 5, 'Skills')">
                    <span class="opt-name">FAST RUN + STATS</span>
                    <span class="opt-price">+5.00€</span>
                </div>
            </div>
        </div>

        <div class="card-footer">
            <div class="price-box">
                <span style="opacity: 0.5; font-size: 0.7rem;">TOTAL ESTIMÉ</span>
                <div class="total-price" id="total-price">15.00€</div>
                <div class="delivery-info">
                    <span id="delivery-time">48 HEURES</span>
                    <span style="opacity: 0.3;">//</span>
                    <span>LICENCE INCLUSE</span>
                </div>
            </div>
            <a href="https://discord.gg/votrelien" class="btn-checkout">COMMANDER</a>
        </div>
    </div>
</div>

<script>
    const card = document.getElementById('card');
    const scene = document.getElementById('scene');
    const cashS = document.getElementById('cash-slider');
    const outS = document.getElementById('outfit-slider');
    const totalPriceTxt = document.getElementById('total-price');
    const deliveryTxt = document.getElementById('delivery-time');

    let extraOptionsPrice = 0;

    // EFFET PARALLAXE
    scene.addEventListener('mousemove', (e) => {
        let xAxis = (window.innerWidth / 2 - e.pageX) / 25;
        let yAxis = (window.innerHeight / 2 - e.pageY) / 25;
        card.style.transform = `rotateY(${xAxis}deg) rotateX(${yAxis}deg)`;
    });

    scene.addEventListener('mouseleave', () => {
        card.style.transform = `rotateY(0deg) rotateX(0deg)`;
        card.style.transition = "all 0.5s ease";
    });

    scene.addEventListener('mouseenter', () => {
        card.style.transition = "none";
    });

    // LOGIQUE CALCUL
    function update() {
        let basePrice = 15; 
        let cash = parseInt(cashS.value);
        let outfits = parseInt(outS.value);

        // Nouveaux prix : 5€ par tranche de 100M (plus réaliste)
        let cashPrice = (cash / 100) * 8; 
        
        // Tenues : 2€ l'unité
        let outfitPrice = outfits * 2;

        let finalPrice = basePrice + cashPrice + outfitPrice + extraOptionsPrice;

        // Affichage
        document.getElementById('cash-val').innerText = cash + "M";
        document.getElementById('outfit-val').innerText = outfits;
        totalPriceTxt.innerText = finalPrice.toFixed(2) + "€";

        // Délais : 40M / 24h
        let hours = Math.ceil(cash / 40) * 24;
        if (hours < 24) hours = 24;
        deliveryTxt.innerText = hours + " HEURES";
    }

    function toggleOption(el, cost, name) {
        el.classList.toggle('active');
        if(el.classList.contains('active')) {
            extraOptionsPrice += cost;
        } else {
            extraOptionsPrice -= cost;
        }
        update();
    }

    cashS.oninput = update;
    outS.oninput = update;
    update();
</script>

</body>
</html>
